<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1, user-scalable=no">
    <title>Home</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
     <nav>
        <ul class="navigation">
            <li><a href="#section1">Machineries</a></li>
            <li><a href="#section2">Materials</a></li>
            <li><a href="#section3">Task</a></li>
            <li><a href="#section4">Communication</a></li>
        </ul>
        </nav>
    <div class="page">
        <section id="section1" class="section">
            <h2><b>Machinery management</b></h2><hr>
            <a href="index.html" class="logout-button" id="logoutButton">Logout</a>
            
          <!-- Machinery -->

            <form>
                <label><b>REQUEST MACHINE </label></b>
                <div class="machinechk">
                <label for="checkbox1">Escavator</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Bulldozer</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox2">Grader</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Compactor</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Cranes</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Backhoe</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Paver</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Roller</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Forklift</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Concrete mixer</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <br>
            </div>
            <label for="comment">Additional request</label><br>
            <textarea id="comment" name="comment" rows="4" cols="50"></textarea><br>
                <button type="button">submit</button>
                <br><br>
                <label for="comment">REPORT MACHINE DAMAGE</label><br>
                <textarea id="comment" name="comment" rows="4" cols="50"></textarea><br>
                <button type="button">Submit</button>
                <br>
                <label for="comment">RETURN MACHINE COMMENT</label><br>
                <textarea id="comment" name="comment" rows="4" cols="50"></textarea>
                <br>
                <button type="button">Send</button>
            </form>
        </section>

        <!-- Materials management -->

        <section id="section2" class="section">
            <h2><b></b>REQUEST MATERIALS FROM MANAGEMENT</b></h2><hr>
            <form>
                <label for="comment">REQUEST MATERIALS</label><br>
                <textarea id="comment" name="comment" rows="4" cols="50"></textarea>
                <br>
                <button type="button">Submit</button>
            </form>
            <img src="Tar.jpg" alt="Blank">
            <img src="Roadlami.jpg" alt="Blank">
            <img src="Lami.jpg" alt="Blank">
        </section>

        <!-- Task manager -->

        <section id="section3" class="section">
            <h1>SITE TASK MANAGER</h1><hr>
            <form>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        background-color: #f0f0f0;
                        color: #333;
                    }
                    .container {
                        max-width: 800px;
                        margin: 20px auto;
                        padding: 20px;
                        background-color: #fff;
                        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                    }
                    .task {
                        margin-bottom: 20px;
                        padding: 10px;
                        background-color: #e9e9e9;
                        border-radius: 5px;
                    }
                    .task.completed {
                        background-color: #ccffcc;
                    }
                    .task-controls {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                    }
                    button {
                        padding: 5px 10px;
                        border: none;
                        border-radius: 5px;
                        cursor: pointer;
                    }
                    .start {
                        background-color: #4CAF50;
                        color: white;
                    }
                    .complete {
                        background-color: #f44336;
                        color: white;
                    }
                    #timer {
                        margin-top: 20px;
                        font-size: 18px;
                        font-weight: bold;
                    }
                </style>
            </head>
            <section>
                <div class="container">
                    <h1>Construction Site Management</h1>
                    <div id="tasks"></div>
                    <div id="timer">Set a time and start a task</div>
                </div>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const tasksData = [
                            '1. Site Preparation',
                            '2. Subgrade Preparation/Sub-base Layer',
                            '3. Base Layer',
                            '4. Asphalt Layer(s)',
                            '5. Finishing Touches',
                            '6. Inspection'
                        ];
                        const tasksContainer = document.getElementById('tasks');
                        let countdown;
                        let currentTaskIndex = 0;
            
                        tasksData.forEach((task, index) => {
                            const taskElement = document.createElement('div');
                            taskElement.className = 'task';
                            taskElement.innerHTML = `
                                <span>${task}</span>
                                <div class="task-controls">
                                    <input type="datetime-local" class="time-input" ${index !== 0 ? 'disabled' : ''}>
                                    <button class="start" ${index !== 0 ? 'disabled' : ''}>Start</button>
                                    <button class="complete" disabled>Complete</button>
                                </div>
                            `;
                            tasksContainer.appendChild(taskElement);
            
                            const startButton = taskElement.querySelector('.start');
                            const completeButton = taskElement.querySelector('.complete');
                            const timeInput = taskElement.querySelector('.time-input');
            
                            startButton.onclick = function() {
                                const selectedDate = new Date(timeInput.value);
                                const currentDate = new Date();
                                currentDate.setHours(0, 0, 0, 0); // Reset hours, minutes, seconds, and milliseconds to compare dates without time
            
                                // Check if the selected date is before the current date
                                if (selectedDate < currentDate) {
                                    alert('ENTER VALID DATE');
                                    return;
                                }
            
                                if (!timeInput.value) {
                                    alert('Set time to start.');
                                    return;
                                }
                                if (currentTaskIndex !== index) {
                                    alert('Do previous task first');
                                    return;
                                }
                                startButton.disabled = true; // Prevent re-starting
                                completeButton.disabled = false;
                                startCountdown(timeInput.value, completeButton, index);
                            };
            
                            completeButton.onclick = function() {
                                clearInterval(countdown);
                                document.getElementById('timer').textContent = 'Task completed!';
                                taskElement.classList.add('completed');
                                completeButton.disabled = true;
                                currentTaskIndex++;
                                if (currentTaskIndex < tasksData.length) {
                                    let nextTaskControls = tasksContainer.children[currentTaskIndex].querySelectorAll('.time-input, .start');
                                    nextTaskControls.forEach(control => control.disabled = false);
                                } else {
                                    alert('Project completed!');
                                }
                            };
                        });
            
                        function startCountdown(selectedTime, completeButton, index) {
                            const endTime = new Date(selectedTime).getTime();
                            countdown = setInterval(function() {
                                const now = new Date().getTime();
                                const timeLeft = endTime - now;
            
                                if (timeLeft <= 0) {
                                    clearInterval(countdown);
                                    document.getElementById('timer').textContent = 'Time Expired!';
                                    completeButton.click();
                                } else {
                                    const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                                    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                                    document.getElementById('timer').textContent = `Time Left: ${days}d ${hours}h ${minutes}m ${seconds}s`;
                                }
                            }, 1000);
                        }
                    });
                </script>
            </section>
    </div>

    <!-- Communication -->

    <section id="section4" class="section">
        <h2>SEND AND RECIEVE MESSAGES</h2><hr>
        <h2>CHOOSE YOUR ROLE</h2>
        <form action="#" method="post">
<select name="options" id="options-dropdown">
    <option value="option1">Project Manager</option>
    <option value="option2">Constructor</option>
    <option value="option3">Surveyor</option>
    <option value="option4">Engineer</option>
    <option value="option5">Foreman</option>
</select><br><br>

            <label for="comment">Write message</label><br>
            <textarea id="comment" name="comment" rows="4" cols="50"></textarea>
            <br>
            <button type="button">Send</button>
        </form>
        <div id="admin-response"></div>
    </section>
</div>

    <script src="scripts.js"></script>
   
</body>
</html>
