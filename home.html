<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1, user-scalable=no">
    <title>Home</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
     <nav>
        <ul class="navigation">
            <li><a href="#section1">Machineries</a></li>
            <li><a href="#section2">Materials</a></li>
            <li><a href="#section3">Task</a></li>
            <li><a href="#section4">Communication</a></li>
        </ul>
        </nav>
    <div class="page">
        <section id="section1" class="section">
            <h2><b>Machinery management</b></h2><hr>
            <a href="index.html" class="logout-button" id="logoutButton">Logout</a>
            
          <!-- Machinery -->

            <form>
                <label><b>REQUEST MACHINE </label></b>
                <div class="machinechk">
                <label for="checkbox1">Escavator</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Bulldozer</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox2">Grader</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Compactor</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Cranes</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Backhoe</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Paver</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Roller</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Forklift</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <label for="checkbox1">Concrete mixer</label>
                <input type="checkbox" id="checkbox1" name="checkbox1"><br>
                <br>
            </div>
            <label for="comment">Additional request</label><br>
            <textarea id="comment" name="comment" rows="4" cols="50"></textarea><br>
                <button type="button">submit</button>
                <br><br>
                <label for="comment">REPORT MACHINE DAMAGE</label><br>
                <textarea id="comment" name="comment" rows="4" cols="50"></textarea><br>
                <button type="button">Submit</button>
                <br>
                <label for="comment">RETURN MACHINE COMMENT</label><br>
                <textarea id="comment" name="comment" rows="4" cols="50"></textarea>
                <br>
                <button type="button">Send</button>
            </form>
        </section>

        <!-- Materials management -->

        <section id="section2" class="section">
            <h2><b></b>REQUEST MATERIALS FROM MANAGEMENT</b></h2><hr>
            <form>
                <label for="comment">REQUEST MATERIALS</label><br>
                <textarea id="comment" name="comment" rows="4" cols="50"></textarea>
                <br>
                <button type="button">Submit</button>
            </form>
            <img src="Tar.jpg" alt="Blank">
            <img src="Roadlami.jpg" alt="Blank">
            <img src="Lami.jpg" alt="Blank">
        </section>

        <!-- Task manager -->

        <section id="section3" class="section">
            <h1>SITE TASK MANAGER</h1><hr>
            <form>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        background-color: #f0f0f0;
                        color: #333;
                    }
                    .container {
                        max-width: 800px;
                        margin: 20px auto;
                        padding: 20px;
                        background-color: #fff;
                        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                    }
                    .task {
                        margin-bottom: 20px;
                        padding: 10px;
                        background-color: #e9e9e9;
                        border-radius: 5px;
                    }
                    h1{
                        text-align: center;
                    }
                    .task-controls {
                        display: flex; /* Align buttons in a row */
                        align-items: center; /* Center-align buttons vertically */
                        gap: 10px; /* Add some space between controls */
                    }
                    button {
                        padding: 5px 10px;
                        border: none;
                        border-radius: 5px;
                        cursor: pointer;
                    }
                    .start, .complete {
                        background-color: #4CAF50;
                        color: white;
                    }
                    .create-time {
                        background-color: #2196F3;
                        color: white;
                    }
                    #timer {
                        margin-top: 20px;
                        font-size: 18px;
                        font-weight: bold;
                    }
                </style>
            </head>
            <body>
                <div class="container">
                    <div id="tasks">
                        <!-- Task elements will be inserted here by JavaScript -->
                    </div>
                    <div id="timer"></div>
                </div>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const tasksData = [
                            '1. Site Preparation',
                            '2. Subgrade Preparation/Sub-base Layer',
                            '3. Base Layer',
                            '4. Asphalt Layer(s)',
                            '5. Finishing Touches',
                            '6. Inspection'
                        ];
                        const tasksContainer = document.getElementById('tasks');
                        let countdown;
                        let currentTaskIndex = 0;
            
                        tasksData.forEach((task, index) => {
                            const taskElement = document.createElement('div');
                            taskElement.className = 'task';
                            taskElement.innerHTML = `
                                <span>${task}</span>
                                <div class="task-controls">
                                    <input type="datetime-local" class="time-input">
                                    <button class="create-time">Set Time</button>
                                    <button class="start" disabled>Start</button>
                                    <button class="complete" disabled>Complete</button>
                                </div>
                            `;
                            tasksContainer.appendChild(taskElement);
            
                            const createTimeButton = taskElement.querySelector('.create-time');
                            const startButton = taskElement.querySelector('.start');
                            const completeButton = taskElement.querySelector('.complete');
                            const timeInput = taskElement.querySelector('.time-input');
            
                            createTimeButton.onclick = function() {
                                const selectedTime = timeInput.value;
                                if (!selectedTime) {
                                    alert('Please select a valid time.');
                                    return;
                                }
                                const selectedDateTime = new Date(selectedTime);
                                const now = new Date();
                                if (selectedDateTime <= now) {
                                    alert('Please select a future time.');
                                    return;
                                }
                                startButton.disabled = false;
                            };
            
                            startButton.onclick = function() {
                                if (index > currentTaskIndex) {
                                    alert('Complete the previous task first.');
                                    return;
                                }
                                const selectedTime = timeInput.value;
                                const endTime = new Date(selectedTime);
                                const now = new Date();
                                const diff = endTime - now;
            
                                if (diff > 0) {
                                    if (countdown) clearInterval(countdown);
                                    countdown = setInterval(() => {
                                        const now = new Date();
                                        const timeLeft = endTime - now;
                                        if (timeLeft <= 0) {
                                            clearInterval(countdown);
                                            document.getElementById('timer').textContent = 'Time Expired!';
                                            completeButton.disabled = false;
                                        } else {
                                            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                                            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                                            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                                            document.getElementById('timer').textContent = `Time Left: ${days}d ${hours}h ${minutes}m ${seconds}s`;
                                        }
                                    }, 1000);
                                    completeButton.disabled = false;
                                } else {
                                    alert('The selected time is in the past. Please set a future time.');
                                }
                            };
            
                            completeButton.onclick = function() {
                                clearInterval(countdown);
                                document.getElementById('timer').textContent = 'Task completed!';
                                taskElement.classList.add('completed');
                                alert('Task completed!');
                                currentTaskIndex++;
                                if (currentTaskIndex < tasksData.length) {
                                    const nextTask = tasksContainer.children[currentTaskIndex];
                                    nextTask.querySelector('.create-time').disabled = false;
                                } else {
                                    alert('Project completed!');
                                }
                            };
                        });
                    });
                </script> 
        </section>

        <!-- Communication -->

        <section id="section4" class="section">
            <h2>SEND AND RECIEVE MESSAGES</h2>
            <form action="#" method="post">
                <label for="comment">Write message</label><br>
                <textarea id="comment" name="comment" rows="4" cols="50"></textarea>
                <br>
                <button type="button">Send</button>
            </form>
            <div id="admin-response"></div>
        </section>
    </div>

    <script src="scripts.js"></script>
   
</body>
</html>
